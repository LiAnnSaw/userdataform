<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
<h2>User Form</h2>
<form th:action="@{${user.id} != null ? '/update' : '/add'}" method="post" th:object="${user}">
    <input type="hidden" th:field="*{id}" />
    <input type="text" th:field="*{name}" placeholder="Name" required /><br/><br/>
    <input type="email" th:field="*{email}" placeholder="Email" required /><br/><br/>
    <button type="submit">Submit</button><br/><br/>
</form>

<h3>Saved Users</h3>
<table class="table table-bordered">
    <thead><tr><th>Name</th><th>Email</th></tr></thead>
    <tbody>
    <tr th:each="u : ${users}">
        <td th:text="${u.name}"></td>
        <td th:text="${u.email}"></td>
        <td>
            <a th:href="@{'/edit/' + ${u.id}}">Edit</a> |
            <a th:href="@{'/delete/' + ${u.id}}" onclick="return confirm('Are you sure?')">Delete</a>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>
